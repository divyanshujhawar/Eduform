{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\divya\\\\OneDrive\\\\Desktop\\\\Eduform\\\\eduform\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Logo from'../.././assets/edLogo.png';import{Link}from\"react-router-dom\";var validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);var validPhoneRegex=RegExp(/^\\d+$/i);var roleOptions=['admin','teacher','student'];var validateForm=function validateForm(errors){var valid=true;Object.values(errors).forEach(// if we have an error string, set valid to false\nfunction(val){return val.length>0&&(valid=false);});return valid;};var countErrors=function countErrors(errors){var count=0;Object.values(errors).forEach(function(val){return val.length>0&&(count=count+1);});return count;};var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);_this.handleChange=function(event){event.preventDefault();var _event$target=event.target,name=_event$target.name,value=_event$target.value;var errors=_this.state.errors;//this.setState({name: document.getElementById(name).value});\n_this.state[name]=value;switch(name){case'firstName':errors.firstName=value.length===0?'First name cannot be empty':'';break;case'lastName':errors.lastName=value.length===0?'Last name cannot be empty':'';break;case'email':errors.email=validEmailRegex.test(value)?'':'Email is not valid';break;case'phone':errors.phone=value.length===10&&validPhoneRegex.test(value)?'':'Invalid phone number';break;case'role':errors.role=value.length===0?'Role cannot be empty':'';break;case'password':errors.password=value.length<8?'Password must be atleast 8 characters long':'';if(errors.password===''&&document.getElementById(\"password\").value===document.getElementById(\"confirmPassword\").value){errors.confirmPassword='';}else{errors.confirmPassword='Passwords do not match';}break;case'confirmPassword':errors.confirmPassword=value!==document.getElementById(\"password\").value?'Passwords do not match':'';break;default:break;}_this.setState(_defineProperty({errors:errors},name,value));};_this.handleSubmit=function(event){event.preventDefault();_this.setState({firstName:document.getElementById(\"first-name\").value});_this.setState({lastName:document.getElementById(\"last-name\").value});_this.setState({email:document.getElementById(\"email\").value});_this.setState({phone:document.getElementById(\"phone\").value});_this.setState({role:document.getElementById(\"role\").value});_this.setState({password:document.getElementById(\"password\").value});_this.setState({confirmPassword:document.getElementById(\"confirmPassword\").value});var vars=[\"first-name\",\"last-name\",\"email\",\"phone\",\"role\",\"password\",\"confirmPassword\"];var i;var errorCount=0;for(i=0;i<vars.length;i++){if(document.getElementById(vars[i]).value.length===0){_this.state.errors[vars[i]]=\"This cannot be empty\";errorCount+=1;}}if(errorCount>0){return;}else{alert(\"Verfication email has been sent. Kindly verify it!\");_this.registerUser(event);return _this.props.history.push('/sign-in');}};_this.state={user:{},firstName:null,lastName:null,email:null,phone:null,role:null,password:null,confirmPassword:null,errors:{firstName:'',lastName:'',email:'',phone:'',role:'',password:'',confirmPassword:''}};return _this;}_createClass(Register,[{key:\"registerUser\",value:function(){var _registerUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();this.state.user.firstName=this.state.firstName;this.state.user.lastName=this.state.lastName;this.state.user.email=this.state.email;this.state.user.phoneNumber=parseInt(this.state.phone,10);this.state.user.role=this.state.role;this.state.user.password=this.state.password;_context.prev=7;_context.next=10;return fetch('/user/registration',{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify(this.state.user)}).then(function(response){return response.json();});case 10:response=_context.sent;console.log(response.text());_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,this,[[7,14]]);}));function registerUser(_x){return _registerUser.apply(this,arguments);}return registerUser;}()},{key:\"render\",value:function render(){var _this$state=this.state,errors=_this$state.errors,formValid=_this$state.formValid;return/*#__PURE__*/React.createElement(\"div\",{className:\"App2\"},/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:'4%',paddingBottom:'2%'},className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{style:{paddingRight:'2%',paddingLeft:'2%'},className:\"row myIntro\"},/*#__PURE__*/React.createElement(\"div\",{style:{padding:'0% 3% 1% 3%'},className:\"col-lg-5 col-md-7 bg-black myLogIn text-primarys\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,noValidate:true},/*#__PURE__*/React.createElement(\"img\",{style:{width:'70px',height:'70px',marginTop:'1.5%'},src:Logo,alt:\"edLogo\"}),/*#__PURE__*/React.createElement(\"h1\",{className:\"welcome\",style:{marginTop:'1.5%',fontSize:'2.5rem',paddingBottom:'10px'}},\" Register for EduForm! \"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{fontSize:'.9rem'},id:\"first-name\",name:\"firstName\",className:\"form-control\",placeholder:\"First name\",onChange:this.handleChange,noValidate:true}),errors.firstName.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.firstName)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{fontSize:'.9rem'},id:\"last-name\",name:\"lastName\",className:\"form-control\",placeholder:\"Last name\",onChange:this.handleChange,noValidate:true}),errors.lastName.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.lastName)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",style:{fontSize:'.9rem'},id:\"email\",name:\"email\",className:\"form-control\",placeholder:\"Email Address\",onChange:this.handleChange,noValidate:true}),errors.email.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.email)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"phone\",style:{fontSize:'.9rem'},id:\"phone\",name:\"phone\",className:\"form-control\",placeholder:\"Phone Number\",onChange:this.handleChange,noValidate:true}),errors.phone.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.phone)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:{fontSize:'.9rem'},id:\"role\",name:\"role\",className:\"form-control\",placeholder:\"Role(a/t/s)\",onChange:this.handleChange,noValidate:true}),errors.role.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.role)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",style:{fontSize:'.9rem'},id:\"password\",name:\"password\",className:\"form-control\",placeholder:\"Password\",onChange:this.handleChange,noValidate:true}),errors.password.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.password)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",style:{fontSize:'.9rem'},id:\"confirmPassword\",name:\"confirmPassword\",className:\"form-control\",placeholder:\"Confirm password\",onChange:this.handleChange,noValidate:true}),errors.confirmPassword.length>0&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},errors.confirmPassword)),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-block log\",style:{fontSize:'1.2rem',backgroundColor:'#febf63'}},\" \",/*#__PURE__*/React.createElement(\"b\",null,\" Register \")),/*#__PURE__*/React.createElement(\"p\",{className:\"forgot-password text-left\",style:{paddingTop:'2.5%',paddingBottom:'.5%',fontSize:'1.1rem'}},\"Already registered? \",/*#__PURE__*/React.createElement(Link,{to:\"./sign-in\",style:{color:'#febf63'}},\"Sign In\")))))));}//{this.state.errorCount !== null ? <p className=\"form-status\">Form is {formValid ? 'valid ✅' : 'invalid ❌'}</p> : 'Form not submitted'}\n}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["C:/Users/divya/OneDrive/Desktop/Eduform/eduform/src/components/login/register.js"],"names":["React","Component","Logo","Link","validEmailRegex","RegExp","validPhoneRegex","roleOptions","validateForm","errors","valid","Object","values","forEach","val","length","countErrors","count","Register","props","handleChange","event","preventDefault","target","name","value","state","firstName","lastName","email","test","phone","role","password","document","getElementById","confirmPassword","setState","handleSubmit","vars","i","errorCount","alert","registerUser","history","push","user","phoneNumber","parseInt","fetch","method","headers","body","JSON","stringify","then","response","json","console","log","text","formValid","paddingTop","paddingBottom","paddingRight","paddingLeft","padding","width","height","marginTop","fontSize","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Logo from '../.././assets/edLogo.png';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\r\n\r\nconst validPhoneRegex = RegExp(/^\\d+$/i);\r\n\r\nconst roleOptions = ['admin', 'teacher', 'student'];\r\n\r\nconst validateForm = (errors) => {\r\n    let valid = true;\r\n    Object.values(errors).forEach(\r\n    // if we have an error string, set valid to false\r\n    (val) => val.length > 0 && (valid = false)\r\n    );\r\n    return valid;\r\n}\r\n\r\nconst countErrors = (errors) => {\r\n    let count = 0;\r\n    Object.values(errors).forEach(\r\n      (val) => val.length > 0 && (count = count+1)\r\n    );\r\n    return count;\r\n}\r\n\r\n\r\nclass Register extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: {},\r\n            firstName: null,\r\n            lastName: null,\r\n            email: null,\r\n            phone: null,\r\n            role: null,\r\n            password: null,\r\n            confirmPassword: null,\r\n            errors: {\r\n                firstName: '',\r\n                lastName: '',\r\n                email: '',\r\n                phone: '',\r\n                role: '',\r\n                password: '',\r\n                confirmPassword: '',\r\n          }\r\n        };\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        event.preventDefault();\r\n        \r\n        const { name, value } = event.target;\r\n        let errors = this.state.errors;\r\n\r\n        //this.setState({name: document.getElementById(name).value});\r\n        this.state[name] = value;\r\n\r\n        switch (name) {\r\n\r\n            case 'firstName': \r\n                errors.firstName = \r\n                value.length === 0\r\n                    ? 'First name cannot be empty'\r\n                    : '';\r\n                break;\r\n            case 'lastName': \r\n                errors.lastName = \r\n                  value.length === 0\r\n                    ? 'Last name cannot be empty'\r\n                    : '';\r\n                break;\r\n            case 'email': \r\n                errors.email = \r\n                validEmailRegex.test(value)\r\n                    ? ''\r\n                    : 'Email is not valid';\r\n                break;\r\n            case 'phone': \r\n                errors.phone = \r\n                (value.length === 10 && (validPhoneRegex.test(value)))\r\n                    ? ''\r\n                    : 'Invalid phone number';\r\n                break;\r\n            case 'role': \r\n                errors.role = \r\n                    value.length === 0 \r\n                    ? 'Role cannot be empty'\r\n                    : '';\r\n                break;\r\n            case 'password': \r\n                errors.password = \r\n                value.length < 8\r\n                    ? 'Password must be atleast 8 characters long'\r\n                    : '';\r\n                if(errors.password === '' && document.getElementById(\"password\").value === document.getElementById(\"confirmPassword\").value){\r\n                    errors.confirmPassword = '';\r\n                } else{\r\n                    errors.confirmPassword = 'Passwords do not match';\r\n                }\r\n \r\n                break;\r\n            \r\n            case 'confirmPassword': \r\n                errors.confirmPassword = \r\n                value !== document.getElementById(\"password\").value\r\n                    ? 'Passwords do not match'\r\n                    : '';\r\n                break;\r\n            \r\n            default:\r\n                break;\r\n        }\r\n      \r\n        this.setState({errors, [name]: value});\r\n\r\n    }\r\n\r\n    async registerUser(event){\r\n\r\n        event.preventDefault();\r\n\r\n        this.state.user.firstName = this.state.firstName;\r\n        this.state.user.lastName = this.state.lastName;\r\n        this.state.user.email = this.state.email;\r\n        this.state.user.phoneNumber = parseInt(this.state.phone, 10);\r\n        this.state.user.role = this.state.role;\r\n        this.state.user.password = this.state.password;\r\n        \r\n        try{\r\n            const response = await fetch('/user/registration', {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json','Accept': 'application/json'},\r\n                body: JSON.stringify(this.state.user)\r\n            })\r\n            .then(response => response.json())\r\n\r\n            console.log(response.text());\r\n\r\n        } catch (error){\r\n            console.log(error);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    handleSubmit = (event) => {\r\n\r\n        event.preventDefault();\r\n\r\n        this.setState({firstName: document.getElementById(\"first-name\").value});\r\n        this.setState({lastName: document.getElementById(\"last-name\").value});\r\n        this.setState({email: document.getElementById(\"email\").value});\r\n        this.setState({phone: document.getElementById(\"phone\").value});\r\n        this.setState({role: document.getElementById(\"role\").value});\r\n        this.setState({password: document.getElementById(\"password\").value});\r\n        this.setState({confirmPassword: document.getElementById(\"confirmPassword\").value});\r\n        \r\n        let vars = [\"first-name\",\"last-name\",\"email\",\"phone\",\"role\",\"password\",\"confirmPassword\"];\r\n        \r\n        var i;\r\n        let errorCount = 0;\r\n        for (i = 0; i < vars.length; i++) {\r\n\r\n            if(document.getElementById(vars[i]).value.length === 0){\r\n                this.state.errors[vars[i]] = \"This cannot be empty\";\r\n                errorCount += 1;\r\n            }\r\n        }\r\n\r\n        if (errorCount>0){\r\n            return;\r\n        } else{\r\n            alert(\"Verfication email has been sent. Kindly verify it!\");\r\n\r\n            this.registerUser(event);\r\n\r\n            return this.props.history.push('/sign-in');\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const {errors, formValid} = this.state;\r\n        return (\r\n        <div className=\"App2\">\r\n            <div style={{paddingTop: '4%', paddingBottom: '2%'}} className=\"container\">\r\n                <div style={{paddingRight: '2%', paddingLeft: '2%'}} className=\"row myIntro\">\r\n                <div style={{padding: '0% 3% 1% 3%'}} className=\"col-lg-5 col-md-7 bg-black myLogIn text-primarys\">\r\n                    <form onSubmit={this.handleSubmit} noValidate>\r\n                    <img style={{width: '70px', height: '70px', marginTop: '1.5%'}} src={Logo} alt=\"edLogo\"/>\r\n                    <h1 className=\"welcome\" style={{marginTop: '1.5%', fontSize: '2.5rem', paddingBottom: '10px'}}> Register for EduForm! </h1>\r\n                            <div className=\"form-group\">\r\n                                <input type=\"text\" style={{fontSize: '.9rem'}} id=\"first-name\" name=\"firstName\" className=\"form-control\" placeholder=\"First name\" onChange={this.handleChange} noValidate/>\r\n                                {errors.firstName.length > 0 && <span className='error'>{errors.firstName}</span>}\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"text\" style={{fontSize: '.9rem'}} id=\"last-name\" name=\"lastName\" className=\"form-control\" placeholder=\"Last name\" onChange={this.handleChange} noValidate/>\r\n                                {errors.lastName.length > 0 && <span className='error'>{errors.lastName}</span>}\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"email\" style={{fontSize: '.9rem'}} id=\"email\" name=\"email\" className=\"form-control\" placeholder=\"Email Address\" onChange={this.handleChange} noValidate/>\r\n                                {errors.email.length > 0 && <span className='error'>{errors.email}</span>}\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"phone\" style={{fontSize: '.9rem'}} id=\"phone\" name=\"phone\" className=\"form-control\" placeholder=\"Phone Number\" onChange={this.handleChange} noValidate/>\r\n                                {errors.phone.length > 0 && <span className='error'>{errors.phone}</span>}\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"text\" style={{fontSize: '.9rem'}} id=\"role\" name=\"role\" className=\"form-control\" placeholder=\"Role(a/t/s)\" onChange={this.handleChange} noValidate/>\r\n                                {errors.role.length > 0 && <span className='error'>{errors.role}</span>}\r\n                            </div>\r\n\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"password\" style={{fontSize: '.9rem'}} id=\"password\" name=\"password\" className=\"form-control\" placeholder=\"Password\" onChange={this.handleChange} noValidate/>\r\n                                {errors.password.length > 0 && <span className='error'>{errors.password}</span>}\r\n                            </div>\r\n\r\n                            <div className=\"form-group\">\r\n                                <input type=\"password\" style={{fontSize: '.9rem'}} id=\"confirmPassword\" name=\"confirmPassword\" className=\"form-control\" placeholder=\"Confirm password\" onChange={this.handleChange} noValidate/>\r\n                                {errors.confirmPassword.length > 0 && <span className='error'>{errors.confirmPassword}</span>}\r\n                            </div>\r\n\r\n                            <button type=\"submit\" className=\"btn btn-block log\" style={{fontSize: '1.2rem', backgroundColor: '#febf63'}}> <b> Register </b></button>\r\n\r\n                            <p className=\"forgot-password text-left\" style={{paddingTop: '2.5%',paddingBottom: '.5%', fontSize: '1.1rem'}}>\r\n                                Already registered? <Link to=\"./sign-in\" style={{color: '#febf63'}}>Sign In</Link>\r\n                            </p>\r\n                    </form>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n//{this.state.errorCount !== null ? <p className=\"form-status\">Form is {formValid ? 'valid ✅' : 'invalid ❌'}</p> : 'Form not submitted'}\r\n}\r\n\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}